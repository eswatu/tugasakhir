<div fxLayout="row" fxLayoutAlign="center">
    <br>
    <div fxLayout="column">
        <div>
            <img [src]="pictureImage" style="width: 300px;height: 400px;"/>
        </div>
        <mat-toolbar *ngIf="currentFile" class="progress-bar">
            <mat-progress-bar color="accent" [value]="progress"></mat-progress-bar>
            <span class="progress">{{ progress }}%</span>
        </mat-toolbar>
        <div *ngIf="isEditing">
                <input single type="file" (change)="selectFile($event)" accept=".png, .jpg, .jpeg"/>
                <br>
                <mat-hint>File berupa gambar, ukuran maksimal 2MB</mat-hint>
                <button mat-flat-button color="primary" [disabled]="!selectedFiles" (click)="upload()">
                    Upload
                </button>
                <div style="color:red">
                    Setelah mengunggah gambar, anda perlu logout untuk melihat hasil perubahan
                    </div>
        </div>
    </div>
    <div *ngIf="message" class="message">
        {{ message }}
    </div>
    <div fxLayout="column" *ngIf="!isEditing">
        <form [formGroup]="form">
            <mat-form-field fxLayout="column" appearance="fill">
                <input formControlName="username" id="username" matInput>
                <mat-hint>Username</mat-hint>
            </mat-form-field>
            <mat-form-field fxLayout="row">
                <mat-hint>Nama</mat-hint>
                <input formControlName="name" id="name" matInput>
            </mat-form-field>
            <mat-form-field fxLayout="row">
                <mat-hint>Jenjang</mat-hint>
                <input formControlName="level" id="level" matInput>
            </mat-form-field>
            <mat-form-field fxLayout="row">
                <mat-hint>Kewenangan</mat-hint>
                <input formControlName="role" id="role" matInput>
            </mat-form-field>
            <mat-form-field fxLayout="row">
                <mat-hint>Angka Kredit</mat-hint>
                <input formControlName="baseAngkre" id="baseAngkre" matInput>
            </mat-form-field>
        </form>
    </div>
    <div fxLayout="column" *ngIf="isEditing">
        <h2>Ubah Password</h2>
        <form [formGroup]="formPwd" >
            <mat-form-field fxLayout="row" appearance="fill">
                <mat-label>Password Lama</mat-label>
                <input formControlName="oldpwd" id="oldpwd" matInput type="password">
                <mat-hint>password lama</mat-hint>
            </mat-form-field>
            <mat-form-field fxLayout="row">
                <mat-label>Password Baru</mat-label>
                <input formControlName="newPwd" id="newPwd" matInput type="password">
            </mat-form-field>
            <mat-form-field fxLayout="row">
                <mat-label>Ulangi Password Baru</mat-label>
                <input formControlName="renewPwd" id="renewPwd" matInput type="password">
                <div *ngIf="formPwd.controls.renewPwd.errors?.mustMatch">Passwords must match</div>
            </mat-form-field>
            <button mat-flat-button type="submit" (click)="changePassword()" color="primary" [disabled]="!formPwd.valid">Change Password</button>
        </form>
    </div>
</div>
<br>
<div fxLayout="row" fxLayoutAlign="center">
    <mat-button-toggle mat-raised-button (click)="toggleEdit()">{{ toggleButtonValue}}</mat-button-toggle>
</div>
